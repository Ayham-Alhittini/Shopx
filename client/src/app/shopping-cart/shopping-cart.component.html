<app-nav>
    <div *ngIf="products.length > 0 && !loading && !(handsetObserver | async)" class="checkout mat-elevation-z2">
        <h2 >Total Price: {{ totalPrice | number}}</h2>
        <button routerLink="/checkout" mat-flat-button color="primary">
            checkout
        </button>
    </div>
    <div class="container">
        <div class="section">
            <h1 class="title">Shopping Cart</h1>
            <div class="spinner" *ngIf="loading">
                <mat-spinner></mat-spinner>
            </div>
            <app-cart-product 
                class="product" 
                *ngFor="let product of products" 
                [product]="product"
                (removeFromCartEvent)="removeFromCart($event)"
                (priceChangeEvent)="updateTotalPrice($event)"
            >
            </app-cart-product>
            <div class="card" *ngIf="!loading && products.length === 0">
                <h4>You have no products in your cart yet.</h4>
                <a mat-striked-button routerLink="/home">get back to shopping</a>
            </div>
        </div>
    </div>
    <div *ngIf="products.length > 0 && !loading && (handsetObserver | async)" class="checkout mat-elevation-z2">
        <h2 >Total Price: {{ totalPrice }}</h2>
        <button routerLink="/checkout" mat-flat-button color="primary">
            checkout
        </button>
    </div>
</app-nav>

