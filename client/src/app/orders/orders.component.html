<app-nav>
    <div class="container">
        <h1 class="title">Orders History</h1>
        <div class="spinner" *ngIf="loading">
            <mat-spinner></mat-spinner>
        </div>
        <table *ngIf="!loading && ordersArray.length > 0" mat-table [dataSource]="ordersArray">
    
            <ng-container matColumnDef="orderId">
                <th mat-header-cell *matHeaderCellDef> Order Id </th>
                <td mat-cell *matCellDef="let order"> {{order.id}} </td>
            </ng-container>
    
            <ng-container matColumnDef="orderStatus">
                <th mat-header-cell *matHeaderCellDef> Order Status </th>
                <td mat-cell *matCellDef="let order"> {{order.state}} </td>
            </ng-container>
    
            <ng-container matColumnDef="dateAdded">
                <th mat-header-cell *matHeaderCellDef> Date Added </th>
                <td mat-cell *matCellDef="let order"> {{ order.dateAdded | date : 'shortDate' }} </td>
            </ng-container>
    
            <ng-container matColumnDef="noOfProducts">
                <th mat-header-cell *matHeaderCellDef> No. of Products </th>
                <td mat-cell *matCellDef="let order"> {{order.numberOfProducts}} </td>
            </ng-container>
    
            <ng-container matColumnDef="customer">
                <th mat-header-cell *matHeaderCellDef> Customer </th>
                <td mat-cell *matCellDef="let order"> {{order.customerKnownAs}} </td>
            </ng-container>
    
            <ng-container matColumnDef="totalPrice">
                <th mat-header-cell *matHeaderCellDef> Total Price </th>
                <td mat-cell *matCellDef="let order"> $ {{order.total}} </td>
            </ng-container>

            <ng-container matColumnDef="view">
                <th mat-header-cell *matHeaderCellDef> View Details </th>
                <td mat-cell *matCellDef="let order"> 
                    <a color="accent" [routerLink]="'/orders/' + order.id" mat-button>view</a>
                </td>
            </ng-container>
    
            <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
        </table>
        <div class="card" *ngIf="!loading && ordersArray.length === 0">
            <h4>You have no orders yet.</h4>
            <a mat-striked-button routerLink="/home">get back to shopping</a>
        </div>
    </div>
</app-nav>